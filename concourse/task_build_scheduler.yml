---
platform: linux

image_resource:
  type: registry-image
  source:
    repository: madmanfred/qt5-builder
    tag: latest


inputs:
  - name: pruefungsplaner-scheduler
    optional: false

outputs:
  - name: built-scheduler

params:
  optimization_level: 3
  make_threads: 4

run:
  path: "/bin/bash"
  args:
   - -c
   - |
     qmake pruefungsplaner-scheduler.pro QMAKE_CXXFLAGS_RELEASE="'"-O${optimization_level}"'" QMAKE_LFLAGS_RELEASE="'"-O${optimization_level}"'" DESTDIR=../built-scheduler
     make -j ${make_threads}
  dir: ./pruefungsplaner-scheduler
